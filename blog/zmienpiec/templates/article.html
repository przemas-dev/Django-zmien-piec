{%extends 'layout.html'%} {%block title%} {{post.title}} {%endblock title%}
{%block content%}

<div class="jumbotron jumbotron-fluid banner banner1 h-20vh">
  <div class="container">
    <h1 class="text-light">Artykuł</h1>
  </div>
</div>

<div class="container">
  <div class="row mt-5">
    <div>
      <h1>{{post.title}}</h1>
      <hr />
      <a>{{post.body|safe}}</a>
    </div>
  </div>

  {%if user.is_authenticated%}
  <div class="row">
    <form method="POST">
      {% csrf_token %} {{form.as_p}}
      <button class="btn btn-primary">Dodaj komentarz</button>
    </form>
  </div>
  <script>
    var elem = document.getElementById("authorInput");
    var elem2 = document.getElementById("postInput");
    if (elem != null && elem2 != null) {
      elem.value = "{{user.id}}";
      elem2.value = "{{post.id}}";
    }
  </script>
  {%endif%} {%if not post.comments.all%}

  <div class="row">
    <h3 class="text-muted">Brak komentarzy do wyświetlenia...</h3>
  </div>
  {%else%}
  <div class="row">
    <h3 class="text-muted">Komentarze:</h3>
  </div>
  {%for comment in post.comments.all|dictsortreversed:"create_date"%}
  <div class="row p-3 border my-3">{{comment.author}} {{comment.body}}</div>

  {%endfor%} {%endif%}
</div>

{%endblock%}
